# 1. 概要

1.不要使用float

2.不要使用多thread

3.回滚（手动、反射、代码生成、Memcpy）

4.帧同步（跨平台、多实例）

## 1.1 帧同步是什么

服务器每隔一段时间收集我们的客户端的操作（摇杆、攻击、技能...），收集完了以后，广播给所有的客户端，每个一段时间，这段时间是多少？人物操作反应时间 50ms~100ms; 1000ms / 50 = 20 采用20左右的fps；计算都放到客户端里面。

帧同步：实时性比较好，缺点，容易作弊。

## 1.2 服务器和客户端分别是怎么处理的（假设不丢帧的情况下）

1.服务端不断地触发帧事件，把采集到的用户输入发给我们的客户端，客户端来进行计算处理：---->推进

2.20FPS--->动画弱爆了，动画的时候，走本地，但是每次服务帧来的时候，我们要做一次画面矫正。

3.AI思考...都要基于矫正后，来进行决策，也要放到逻辑帧，而不是渲染帧。

4.当我们服务器采集到我们客户端发过来的数据的时候，--->（帧的id）--->id设置为已经处理。

5.当我们下一帧发生的时候，发哪些数据给客户端呢？发送服务器上客户端没有处理的帧都会发给客户端。

## 1.3 丢了帧怎么处理

## 1.4 断线了以后怎么重连

断线了，重新连上以后

客户端ID帧；

服务器所有的帧--->发给你；ID帧--->快速的计算，快速计算最新帧。

ID---> 没有计算的帧， 5*20 = 100 100帧；

退出，0帧---》游戏里面---》1分钟